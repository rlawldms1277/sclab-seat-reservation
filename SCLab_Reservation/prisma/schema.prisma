generator client {
  provider        = "prisma-client-js"
  output          = "../node_modules/.prisma/client"
    binaryTargets = ["native", "rhel-openssl-3.0.x"]
  plugins       = ["@prisma/nextjs-monorepo-workaround-plugin"]
}
datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id       String @id @default(cuid())
  studentId String @unique
  password String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
  reservations Reservation[]
}

model Admin {
  id        String   @id @default(cuid())
  username  String   @unique
  password  String
  createdAt DateTime @default(now())
}

enum ReservationStatus {
  ACTIVE
  EXPIRED
  CANCELLED
}

model Reservation {
  id            String            @id @default(cuid())
  user_id       String
  user          User              @relation(fields: [user_id], references: [id], onDelete: Cascade)
  seat_id       Int
  startedAt     Int
  endedAt       Int
  extendedAt    DateTime?
  extendedCount Int               @default(0)
  checkoutAt    DateTime?
  status        ReservationStatus @default(ACTIVE)
  createdAt     DateTime          @default(now())
  refDate       DateTime
}